---
name: write_screenplay_outline
description: 生成剧本大纲并在项目中创建场景的技能
---

# 剧本大纲编写技能

此技能允许代理生成全面的剧本大纲并在项目的剧本管理器中创建单个场景。它可以将故事概念分解为遵循好莱坞标准的结构化场景，并包含适当的元数据。

## 功能

- 从概念或想法生成完整的剧本大纲
- 创建具有适当元数据（地点、时间、角色等）的单个场景
- 按照好莱坞剧本格式构建场景
- 按时间顺序组织场景并使用正确的场景编号
- 将角色分配给适当的场景
- 设置特定场景的元数据，如时长和故事节拍
- 支持黑色电影、剧情片和动作片类型的特定地点模板

## 约束

- **需要上下文**：此技能需要有效的 ToolContext 和剧本管理器的访问权限
- **需要剧本管理器**：项目必须具有初始化的剧本管理器来存储场景
- **场景限制**：每个大纲最多 10 个场景（基于预定义的故事结构类型）
- **类型支持**："黑色电影"（Film Noir）、"剧情片"（Drama）和"动作片"（Action）有专门的地点模板
- **故事结构**：使用预定义的故事节拍生成场景（建立镜头、角色介绍、冲突设置、上升动作、副情节发展、角色发展、情节转折、高潮设置、高潮场景、结局）

## 输入要求

通过 `execute_skill_script` 调用脚本时提供以下输入：

- `concept`（字符串，必需）：1-2句话的核心故事想法。
- `genre`（字符串，可选，默认："General"）："Film Noir"、"Drama"或"Action"（不区分大小写）。其他值使用默认地点模板。
- `num_scenes`（整数，可选，默认：10）：场景数量（1-10）。超过 10 的值将受到故事结构限制的约束。

如果提示未明确提供概念，请在调用脚本之前综合一个简洁的 1-2 句话的概念。

## 使用方法

当用户想要从头开始开发剧本或扩展现有概念时，可以调用此技能。它将生成结构化的大纲并在项目的剧本管理器中创建相应的场景。

**最佳实践：**
- 提供清晰简洁的概念（1-2句话描述核心故事想法）
- 选择适当的类型以获得特定类型的地点模板
- 使用 8-10 个场景构建完整的短篇故事结构
- 较少的场景（5-7个）适用于专注的叙事

## 参数示例

```json
{
  "concept": "1920年代芝加哥的一名侦探调查爵士乐区一系列神秘的失踪事件",
  "genre": "Film Noir",
  "num_scenes": 8
}
```

## 输出

返回包含以下内容的 JSON 对象：
- `success`：指示操作是否成功的布尔值
- `total_scenes`：生成的场景数量
- `created_scenes`：成功创建的场景 ID 列表
- `failed_scenes`：创建失败的场景 ID 列表（如果有）
- `outline_summary`：场景摘要数组，包含每个生成场景的 scene_id 和 logline
- `message`：人类可读的状态消息

## 错误处理

- 如果缺少或为空 `concept`，则返回错误
- 如果上下文中没有剧本管理器，则返回错误
- 可能部分成功：某些场景可能已创建，而其他场景失败
- 失败的场景在 `failed_scenes` 数组中列出，详细信息在消息中
