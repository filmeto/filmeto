name: Bailian Server
version: 1.0.0
description: Bailian Server supporting multiple tools
author: Filmeto Team
engine: bailian

requirements:
  python: ">=3.9"
  packages:
    - pillow>=9.0.0

# Define multiple tools supported by this plugin
tools:
  - name: text2image
    description: Generate image from text prompt
    parameters:
      - name: prompt
        type: string
        required: true
        description: Text prompt for generation

      - name: negative_prompt
        type: string
        required: false
        default: ""
        description: Negative prompt

      - name: width
        type: integer
        required: false
        default: 512
        min: 256
        max: 2048
        description: Image width

      - name: height
        type: integer
        required: false
        default: 512
        min: 256
        max: 2048
        description: Image height

      - name: steps
        type: integer
        required: false
        default: 20
        min: 1
        max: 100
        description: Number of generation steps

  - name: image2image
    description: Transform image based on text prompt
    parameters:
      - name: prompt
        type: string
        required: true
        description: Text prompt for transformation

      - name: strength
        type: float
        required: false
        default: 0.7
        min: 0.0
        max: 1.0
        description: Strength of transformation

  - name: bailian_app
    description: Execute a Bailian Application task
    parameters:
      - name: prompt
        type: string
        required: true
        description: Input prompt for the Bailian App
      
      - name: app_id
        type: string
        required: false
        description: Bailian App ID (overrides default config)

startup:
  timeout: 30
  health_check: true

execution:
  timeout: 300
  max_retries: 3

# Configuration schema for creating server instances
config_schema:
  fields:
    - name: agent_key
      label: Agent Key / App ID
      type: string
      required: true
      default: ""
      description: Bailian Agent Key or App ID
      placeholder: "Enter Agent Key or App ID"

    - name: endpoint
      label: API Endpoint
      type: url
      required: false
      default: "https://bailian.aliyuncs.com"
      description: Bailian API endpoint
      placeholder: "https://bailian.aliyuncs.com"
